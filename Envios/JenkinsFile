pipeline {

  agent any 
  stages {
    
    stage('Ver el codigo base'){
    
      steps {
      
        cleanWs()
        checkout scm:[$class: 'GitSCM', branches> [[name: '*/master']],userRemoteConfigs: 
        [[url: 'https://github.com/LucianoIsgro/Envios-Ing.Software.git']]]     
      }
    
    }
    
    stage('Build'){
      steps{
      sh 'mkdir lib'
      sh 'cd lib/ ; wget https://repo1.maven.org/maven2/org/junit/platform/junit-platform-console-standalone/1.7.0/junit-platform-console-standalone-1.7.0-all.jar'
        }
   }
  stage('Test'){
            steps{
                sh 'cd src/ ; java -jar ../lib/junit-platform-console-standalone-1.7.0-all.jar -cp "." --select-class SBO_MEN_U10_formatoPrecioEnvio  --reports-dir="reports"'
                junit 'src/reports/*-jupiter.xml'
            }
        }
  
  stage('Deploy'){
            steps{
                sh 'cd src/ ; java App' 
            }
        }
  
  }



}
